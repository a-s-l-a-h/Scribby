<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ScribbyApp.Views.ScriptPage"
             Title="Script Control">

    <Grid RowDefinitions="Auto, *, Auto" Padding="10" RowSpacing="10">

        <!-- Row 0: Title -->
        <Label
            Grid.Row="0"
            Text="JavaScript Editor"
            FontSize="Title"
            FontAttributes="Bold"
            HorizontalOptions="Center" />

        <!-- Row 1: The Advanced Editor Layout -->
        <Border Grid.Row="1" Stroke="LightGray" StrokeThickness="1">
            <Grid ColumnDefinitions="Auto, *">
                <Editor Grid.Column="0"
                        x:Name="LineNumberEditor"
                        IsReadOnly="True"
                        WidthRequest="40"
                        FontFamily="monospace"
                        BackgroundColor="#f0f0f0"
                        TextColor="Gray"
                        VerticalTextAlignment="Start"
                        Margin="0,0,5,0"/>

                <ScrollView Grid.Column="1" Orientation="Both">
                    <Editor
                        x:Name="CodeEditor"
                        Placeholder="// Write your JavaScript here"
                        FontFamily="monospace"
                        AutoSize="TextChanges"
                        TextChanged="OnCodeEditorTextChanged"
                        VerticalOptions="FillAndExpand"
                        HorizontalOptions="FillAndExpand" />
                </ScrollView>
            </Grid>
        </Border>

        <!-- Row 2: Status and Run/Abort Buttons -->
        <VerticalStackLayout Grid.Row="2" Spacing="10">
            <Label x:Name="StatusLabel" Text="Ready to run script." FontSize="Small" />

            <!-- Use a Grid to manage Run/Abort buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Button
                    Grid.Column="0"
                    x:Name="RunScriptButton"
                    Text="Run Script"
                    Clicked="OnRunScriptClicked"
                    BackgroundColor="MediumPurple"
                    TextColor="White"/>

                <Button
                    Grid.Column="1"
                    x:Name="AbortScriptButton"
                    Text="Abort Script"
                    Clicked="OnAbortScriptClicked"
                    BackgroundColor="IndianRed"
                    TextColor="White"
                    IsEnabled="False" />
                <!-- Disabled by default -->
            </Grid>
        </VerticalStackLayout>

    </Grid>
</ContentPage>